{"filter":false,"title":"Post.php","tooltip":"/Test/bbs/models/Post.php","undoManager":{"mark":100,"position":100,"stack":[[{"start":{"row":11,"column":72},"end":{"row":11,"column":73},"action":"remove","lines":["$"],"id":28}],[{"start":{"row":11,"column":72},"end":{"row":11,"column":73},"action":"insert","lines":["$"],"id":29}],[{"start":{"row":11,"column":73},"end":{"row":11,"column":74},"action":"remove","lines":["p"],"id":30},{"start":{"row":11,"column":73},"end":{"row":11,"column":74},"action":"remove","lines":["a"]},{"start":{"row":11,"column":73},"end":{"row":11,"column":74},"action":"remove","lines":["s"]},{"start":{"row":11,"column":73},"end":{"row":11,"column":74},"action":"remove","lines":["s"]},{"start":{"row":11,"column":73},"end":{"row":11,"column":74},"action":"remove","lines":["w"]},{"start":{"row":11,"column":73},"end":{"row":11,"column":74},"action":"remove","lines":["o"]},{"start":{"row":11,"column":73},"end":{"row":11,"column":74},"action":"remove","lines":["r"]},{"start":{"row":11,"column":73},"end":{"row":11,"column":74},"action":"remove","lines":["d"]}],[{"start":{"row":11,"column":73},"end":{"row":11,"column":74},"action":"insert","lines":["i"],"id":31},{"start":{"row":11,"column":74},"end":{"row":11,"column":75},"action":"insert","lines":["m"]},{"start":{"row":11,"column":75},"end":{"row":11,"column":76},"action":"insert","lines":["a"]}],[{"start":{"row":11,"column":72},"end":{"row":11,"column":76},"action":"remove","lines":["$ima"],"id":32},{"start":{"row":11,"column":72},"end":{"row":11,"column":78},"action":"insert","lines":["$image"]}],[{"start":{"row":12,"column":22},"end":{"row":12,"column":23},"action":"remove","lines":["e"],"id":33},{"start":{"row":12,"column":21},"end":{"row":12,"column":22},"action":"remove","lines":["m"]},{"start":{"row":12,"column":20},"end":{"row":12,"column":21},"action":"remove","lines":["a"]},{"start":{"row":12,"column":19},"end":{"row":12,"column":20},"action":"remove","lines":["n"]}],[{"start":{"row":12,"column":19},"end":{"row":12,"column":20},"action":"insert","lines":["u"],"id":34},{"start":{"row":12,"column":20},"end":{"row":12,"column":21},"action":"insert","lines":["s"]},{"start":{"row":12,"column":21},"end":{"row":12,"column":22},"action":"insert","lines":["e"]},{"start":{"row":12,"column":22},"end":{"row":12,"column":23},"action":"insert","lines":["r"]}],[{"start":{"row":12,"column":23},"end":{"row":12,"column":24},"action":"insert","lines":["?"],"id":35}],[{"start":{"row":12,"column":23},"end":{"row":12,"column":24},"action":"remove","lines":["?"],"id":36}],[{"start":{"row":12,"column":23},"end":{"row":12,"column":24},"action":"insert","lines":["_"],"id":37},{"start":{"row":12,"column":24},"end":{"row":12,"column":25},"action":"insert","lines":["i"]},{"start":{"row":12,"column":25},"end":{"row":12,"column":26},"action":"insert","lines":["d"]}],[{"start":{"row":12,"column":33},"end":{"row":12,"column":34},"action":"remove","lines":["e"],"id":38},{"start":{"row":12,"column":32},"end":{"row":12,"column":33},"action":"remove","lines":["m"]},{"start":{"row":12,"column":31},"end":{"row":12,"column":32},"action":"remove","lines":["a"]},{"start":{"row":12,"column":30},"end":{"row":12,"column":31},"action":"remove","lines":["n"]}],[{"start":{"row":12,"column":30},"end":{"row":12,"column":31},"action":"insert","lines":["u"],"id":39},{"start":{"row":12,"column":31},"end":{"row":12,"column":32},"action":"insert","lines":["s"]},{"start":{"row":12,"column":32},"end":{"row":12,"column":33},"action":"insert","lines":["e"]}],[{"start":{"row":12,"column":29},"end":{"row":12,"column":33},"action":"remove","lines":["$use"],"id":40},{"start":{"row":12,"column":29},"end":{"row":12,"column":37},"action":"insert","lines":["$user_id"]}],[{"start":{"row":13,"column":23},"end":{"row":13,"column":24},"action":"remove","lines":["l"],"id":41},{"start":{"row":13,"column":22},"end":{"row":13,"column":23},"action":"remove","lines":["i"]},{"start":{"row":13,"column":21},"end":{"row":13,"column":22},"action":"remove","lines":["a"]},{"start":{"row":13,"column":20},"end":{"row":13,"column":21},"action":"remove","lines":["m"]},{"start":{"row":13,"column":19},"end":{"row":13,"column":20},"action":"remove","lines":["e"]}],[{"start":{"row":13,"column":19},"end":{"row":13,"column":20},"action":"insert","lines":["t"],"id":42},{"start":{"row":13,"column":20},"end":{"row":13,"column":21},"action":"insert","lines":["i"]},{"start":{"row":13,"column":21},"end":{"row":13,"column":22},"action":"insert","lines":["t"]},{"start":{"row":13,"column":22},"end":{"row":13,"column":23},"action":"insert","lines":["l"]},{"start":{"row":13,"column":23},"end":{"row":13,"column":24},"action":"insert","lines":["e"]}],[{"start":{"row":13,"column":32},"end":{"row":13,"column":33},"action":"remove","lines":["l"],"id":43},{"start":{"row":13,"column":31},"end":{"row":13,"column":32},"action":"remove","lines":["i"]},{"start":{"row":13,"column":30},"end":{"row":13,"column":31},"action":"remove","lines":["a"]},{"start":{"row":13,"column":29},"end":{"row":13,"column":30},"action":"remove","lines":["m"]},{"start":{"row":13,"column":28},"end":{"row":13,"column":29},"action":"remove","lines":["e"]}],[{"start":{"row":13,"column":28},"end":{"row":13,"column":29},"action":"insert","lines":["t"],"id":44},{"start":{"row":13,"column":29},"end":{"row":13,"column":30},"action":"insert","lines":["i"]},{"start":{"row":13,"column":30},"end":{"row":13,"column":31},"action":"insert","lines":["t"]},{"start":{"row":13,"column":31},"end":{"row":13,"column":32},"action":"insert","lines":["l"]},{"start":{"row":13,"column":32},"end":{"row":13,"column":33},"action":"insert","lines":["e"]}],[{"start":{"row":14,"column":26},"end":{"row":14,"column":27},"action":"remove","lines":["d"],"id":45},{"start":{"row":14,"column":25},"end":{"row":14,"column":26},"action":"remove","lines":["r"]},{"start":{"row":14,"column":24},"end":{"row":14,"column":25},"action":"remove","lines":["o"]},{"start":{"row":14,"column":23},"end":{"row":14,"column":24},"action":"remove","lines":["w"]},{"start":{"row":14,"column":22},"end":{"row":14,"column":23},"action":"remove","lines":["s"]},{"start":{"row":14,"column":21},"end":{"row":14,"column":22},"action":"remove","lines":["s"]},{"start":{"row":14,"column":20},"end":{"row":14,"column":21},"action":"remove","lines":["a"]},{"start":{"row":14,"column":19},"end":{"row":14,"column":20},"action":"remove","lines":["p"]}],[{"start":{"row":14,"column":19},"end":{"row":14,"column":20},"action":"insert","lines":["c"],"id":46},{"start":{"row":14,"column":20},"end":{"row":14,"column":21},"action":"insert","lines":["o"]},{"start":{"row":14,"column":21},"end":{"row":14,"column":22},"action":"insert","lines":["n"]},{"start":{"row":14,"column":22},"end":{"row":14,"column":23},"action":"insert","lines":["t"]},{"start":{"row":14,"column":23},"end":{"row":14,"column":24},"action":"insert","lines":["e"]},{"start":{"row":14,"column":24},"end":{"row":14,"column":25},"action":"insert","lines":["n"]},{"start":{"row":14,"column":25},"end":{"row":14,"column":26},"action":"insert","lines":["t"]}],[{"start":{"row":14,"column":36},"end":{"row":14,"column":37},"action":"remove","lines":["d"],"id":47},{"start":{"row":14,"column":35},"end":{"row":14,"column":36},"action":"remove","lines":["r"]},{"start":{"row":14,"column":34},"end":{"row":14,"column":35},"action":"remove","lines":["o"]},{"start":{"row":14,"column":33},"end":{"row":14,"column":34},"action":"remove","lines":["w"]},{"start":{"row":14,"column":32},"end":{"row":14,"column":33},"action":"remove","lines":["s"]},{"start":{"row":14,"column":31},"end":{"row":14,"column":32},"action":"remove","lines":["s"]},{"start":{"row":14,"column":30},"end":{"row":14,"column":31},"action":"remove","lines":["a"]},{"start":{"row":14,"column":29},"end":{"row":14,"column":30},"action":"remove","lines":["p"]}],[{"start":{"row":14,"column":29},"end":{"row":14,"column":30},"action":"insert","lines":["c"],"id":48},{"start":{"row":14,"column":30},"end":{"row":14,"column":31},"action":"insert","lines":["o"]},{"start":{"row":14,"column":31},"end":{"row":14,"column":32},"action":"insert","lines":["n"]},{"start":{"row":14,"column":32},"end":{"row":14,"column":33},"action":"insert","lines":["t"]},{"start":{"row":14,"column":33},"end":{"row":14,"column":34},"action":"insert","lines":["e"]},{"start":{"row":14,"column":34},"end":{"row":14,"column":35},"action":"insert","lines":["n"]},{"start":{"row":14,"column":35},"end":{"row":14,"column":36},"action":"insert","lines":["t"]}],[{"start":{"row":14,"column":37},"end":{"row":15,"column":0},"action":"insert","lines":["",""],"id":49},{"start":{"row":15,"column":0},"end":{"row":15,"column":12},"action":"insert","lines":["            "]},{"start":{"row":15,"column":12},"end":{"row":15,"column":13},"action":"insert","lines":["$"]},{"start":{"row":15,"column":13},"end":{"row":15,"column":14},"action":"insert","lines":["t"]},{"start":{"row":15,"column":14},"end":{"row":15,"column":15},"action":"insert","lines":["h"]},{"start":{"row":15,"column":15},"end":{"row":15,"column":16},"action":"insert","lines":["i"]}],[{"start":{"row":15,"column":16},"end":{"row":15,"column":17},"action":"insert","lines":["s"],"id":50},{"start":{"row":15,"column":17},"end":{"row":15,"column":18},"action":"insert","lines":["-"]},{"start":{"row":15,"column":18},"end":{"row":15,"column":19},"action":"insert","lines":[">"]}],[{"start":{"row":15,"column":19},"end":{"row":15,"column":20},"action":"insert","lines":["i"],"id":51},{"start":{"row":15,"column":20},"end":{"row":15,"column":21},"action":"insert","lines":["n"]},{"start":{"row":15,"column":21},"end":{"row":15,"column":22},"action":"insert","lines":["a"]}],[{"start":{"row":15,"column":21},"end":{"row":15,"column":22},"action":"remove","lines":["a"],"id":52},{"start":{"row":15,"column":20},"end":{"row":15,"column":21},"action":"remove","lines":["n"]}],[{"start":{"row":15,"column":20},"end":{"row":15,"column":21},"action":"insert","lines":["m"],"id":53},{"start":{"row":15,"column":21},"end":{"row":15,"column":22},"action":"insert","lines":["a"]},{"start":{"row":15,"column":22},"end":{"row":15,"column":23},"action":"insert","lines":["g"]},{"start":{"row":15,"column":23},"end":{"row":15,"column":24},"action":"insert","lines":["e"]}],[{"start":{"row":15,"column":24},"end":{"row":15,"column":25},"action":"insert","lines":[" "],"id":54},{"start":{"row":15,"column":25},"end":{"row":15,"column":26},"action":"insert","lines":["="]}],[{"start":{"row":15,"column":26},"end":{"row":15,"column":27},"action":"insert","lines":[" "],"id":55},{"start":{"row":15,"column":27},"end":{"row":15,"column":28},"action":"insert","lines":["$"]},{"start":{"row":15,"column":28},"end":{"row":15,"column":29},"action":"insert","lines":["i"]}],[{"start":{"row":15,"column":29},"end":{"row":15,"column":30},"action":"insert","lines":["m"],"id":56},{"start":{"row":15,"column":30},"end":{"row":15,"column":31},"action":"insert","lines":["a"]}],[{"start":{"row":15,"column":27},"end":{"row":15,"column":31},"action":"remove","lines":["$ima"],"id":57},{"start":{"row":15,"column":27},"end":{"row":15,"column":33},"action":"insert","lines":["$image"]}],[{"start":{"row":15,"column":33},"end":{"row":15,"column":34},"action":"insert","lines":[";"],"id":58}],[{"start":{"row":23,"column":25},"end":{"row":23,"column":26},"action":"remove","lines":["e"],"id":59},{"start":{"row":23,"column":24},"end":{"row":23,"column":25},"action":"remove","lines":["m"]},{"start":{"row":23,"column":23},"end":{"row":23,"column":24},"action":"remove","lines":["a"]},{"start":{"row":23,"column":22},"end":{"row":23,"column":23},"action":"remove","lines":["n"]}],[{"start":{"row":23,"column":22},"end":{"row":23,"column":23},"action":"insert","lines":["t"],"id":60},{"start":{"row":23,"column":23},"end":{"row":23,"column":24},"action":"insert","lines":["i"]},{"start":{"row":23,"column":24},"end":{"row":23,"column":25},"action":"insert","lines":["t"]},{"start":{"row":23,"column":25},"end":{"row":23,"column":26},"action":"insert","lines":["l"]},{"start":{"row":23,"column":26},"end":{"row":23,"column":27},"action":"insert","lines":["e"]}],[{"start":{"row":24,"column":30},"end":{"row":24,"column":31},"action":"remove","lines":["前"],"id":61},{"start":{"row":24,"column":29},"end":{"row":24,"column":30},"action":"remove","lines":["名"]}],[{"start":{"row":24,"column":29},"end":{"row":24,"column":30},"action":"insert","lines":["t"],"id":62},{"start":{"row":24,"column":30},"end":{"row":24,"column":31},"action":"insert","lines":["a"]}],[{"start":{"row":24,"column":30},"end":{"row":24,"column":31},"action":"remove","lines":["a"],"id":63},{"start":{"row":24,"column":29},"end":{"row":24,"column":30},"action":"remove","lines":["t"]}],[{"start":{"row":24,"column":29},"end":{"row":24,"column":33},"action":"insert","lines":["タイトル"],"id":64}],[{"start":{"row":27,"column":26},"end":{"row":27,"column":27},"action":"remove","lines":["l"],"id":65},{"start":{"row":27,"column":25},"end":{"row":27,"column":26},"action":"remove","lines":["i"]},{"start":{"row":27,"column":24},"end":{"row":27,"column":25},"action":"remove","lines":["a"]},{"start":{"row":27,"column":23},"end":{"row":27,"column":24},"action":"remove","lines":["m"]},{"start":{"row":27,"column":22},"end":{"row":27,"column":23},"action":"remove","lines":["e"]}],[{"start":{"row":27,"column":22},"end":{"row":27,"column":23},"action":"insert","lines":["c"],"id":66},{"start":{"row":27,"column":23},"end":{"row":27,"column":24},"action":"insert","lines":["o"]},{"start":{"row":27,"column":24},"end":{"row":27,"column":25},"action":"insert","lines":["n"]},{"start":{"row":27,"column":25},"end":{"row":27,"column":26},"action":"insert","lines":["t"]},{"start":{"row":27,"column":26},"end":{"row":27,"column":27},"action":"insert","lines":["e"]},{"start":{"row":27,"column":27},"end":{"row":27,"column":28},"action":"insert","lines":["n"]},{"start":{"row":27,"column":28},"end":{"row":27,"column":29},"action":"insert","lines":["t"]}],[{"start":{"row":30,"column":7},"end":{"row":31,"column":13},"action":"remove","lines":["         $errors[] = 'メールアドレスは正しく入力してください';","            }"],"id":69}],[{"start":{"row":29,"column":0},"end":{"row":30,"column":7},"action":"remove","lines":["            }else if(!preg_match('/^[a-zA-Z0-9_+-]+(.[a-zA-Z0-9_+-]+)*@([a-zA-Z0-9][a-zA-Z0-9-]*[a-zA-Z0-9]*\\.)+[a-zA-Z]{2,}$/', $this->email)){ // 年齢が正の整数でなければ","       "],"id":70},{"start":{"row":28,"column":47},"end":{"row":29,"column":0},"action":"remove","lines":["",""]}],[{"start":{"row":28,"column":35},"end":{"row":28,"column":36},"action":"remove","lines":["ス"],"id":71}],[{"start":{"row":28,"column":34},"end":{"row":28,"column":35},"action":"remove","lines":["レ"],"id":72},{"start":{"row":28,"column":33},"end":{"row":28,"column":34},"action":"remove","lines":["ド"]},{"start":{"row":28,"column":32},"end":{"row":28,"column":33},"action":"remove","lines":["ア"]},{"start":{"row":28,"column":31},"end":{"row":28,"column":32},"action":"remove","lines":["ル"]},{"start":{"row":28,"column":30},"end":{"row":28,"column":31},"action":"remove","lines":["ー"]},{"start":{"row":28,"column":29},"end":{"row":28,"column":30},"action":"remove","lines":["メ"]}],[{"start":{"row":28,"column":29},"end":{"row":28,"column":31},"action":"insert","lines":["本文"],"id":73}],[{"start":{"row":29,"column":29},"end":{"row":29,"column":30},"action":"remove","lines":["d"],"id":74},{"start":{"row":29,"column":28},"end":{"row":29,"column":29},"action":"remove","lines":["r"]},{"start":{"row":29,"column":27},"end":{"row":29,"column":28},"action":"remove","lines":["o"]},{"start":{"row":29,"column":26},"end":{"row":29,"column":27},"action":"remove","lines":["w"]},{"start":{"row":29,"column":25},"end":{"row":29,"column":26},"action":"remove","lines":["s"]},{"start":{"row":29,"column":24},"end":{"row":29,"column":25},"action":"remove","lines":["s"]},{"start":{"row":29,"column":23},"end":{"row":29,"column":24},"action":"remove","lines":["a"]},{"start":{"row":29,"column":22},"end":{"row":29,"column":23},"action":"remove","lines":["p"]}],[{"start":{"row":29,"column":22},"end":{"row":29,"column":27},"action":"insert","lines":["image"],"id":75}],[{"start":{"row":30,"column":33},"end":{"row":30,"column":34},"action":"remove","lines":["ド"],"id":76},{"start":{"row":30,"column":32},"end":{"row":30,"column":33},"action":"remove","lines":["ー"]},{"start":{"row":30,"column":31},"end":{"row":30,"column":32},"action":"remove","lines":["ワ"]},{"start":{"row":30,"column":30},"end":{"row":30,"column":31},"action":"remove","lines":["ス"]},{"start":{"row":30,"column":29},"end":{"row":30,"column":30},"action":"remove","lines":["パ"]}],[{"start":{"row":30,"column":29},"end":{"row":30,"column":31},"action":"insert","lines":["画像"],"id":77}],[{"start":{"row":30,"column":33},"end":{"row":30,"column":34},"action":"remove","lines":["力"],"id":78},{"start":{"row":30,"column":32},"end":{"row":30,"column":33},"action":"remove","lines":["入"]}],[{"start":{"row":30,"column":32},"end":{"row":30,"column":34},"action":"insert","lines":["選択"],"id":79}],[{"start":{"row":34,"column":9},"end":{"row":34,"column":10},"action":"insert","lines":["}"],"id":80}],[{"start":{"row":80,"column":61},"end":{"row":80,"column":62},"action":"remove","lines":["s"],"id":81},{"start":{"row":80,"column":60},"end":{"row":80,"column":61},"action":"remove","lines":["r"]},{"start":{"row":80,"column":59},"end":{"row":80,"column":60},"action":"remove","lines":["e"]},{"start":{"row":80,"column":58},"end":{"row":80,"column":59},"action":"remove","lines":["s"]},{"start":{"row":80,"column":57},"end":{"row":80,"column":58},"action":"remove","lines":["u"]}],[{"start":{"row":80,"column":57},"end":{"row":80,"column":58},"action":"insert","lines":["p"],"id":82},{"start":{"row":80,"column":58},"end":{"row":80,"column":59},"action":"insert","lines":["o"]},{"start":{"row":80,"column":59},"end":{"row":80,"column":60},"action":"insert","lines":["s"]},{"start":{"row":80,"column":60},"end":{"row":80,"column":61},"action":"insert","lines":["t"]},{"start":{"row":80,"column":61},"end":{"row":80,"column":62},"action":"insert","lines":["s"]}],[{"start":{"row":80,"column":67},"end":{"row":80,"column":68},"action":"remove","lines":["e"],"id":83},{"start":{"row":80,"column":66},"end":{"row":80,"column":67},"action":"remove","lines":["m"]},{"start":{"row":80,"column":65},"end":{"row":80,"column":66},"action":"remove","lines":["a"]},{"start":{"row":80,"column":64},"end":{"row":80,"column":65},"action":"remove","lines":["n"]}],[{"start":{"row":80,"column":64},"end":{"row":80,"column":65},"action":"insert","lines":["t"],"id":84},{"start":{"row":80,"column":65},"end":{"row":80,"column":66},"action":"insert","lines":["i"]},{"start":{"row":80,"column":66},"end":{"row":80,"column":67},"action":"insert","lines":["t"]},{"start":{"row":80,"column":67},"end":{"row":80,"column":68},"action":"insert","lines":["l"]}],[{"start":{"row":80,"column":64},"end":{"row":80,"column":68},"action":"remove","lines":["titl"],"id":85},{"start":{"row":80,"column":64},"end":{"row":80,"column":69},"action":"insert","lines":["title"]}],[{"start":{"row":80,"column":75},"end":{"row":80,"column":76},"action":"remove","lines":["l"],"id":86},{"start":{"row":80,"column":74},"end":{"row":80,"column":75},"action":"remove","lines":["i"]},{"start":{"row":80,"column":73},"end":{"row":80,"column":74},"action":"remove","lines":["a"]},{"start":{"row":80,"column":72},"end":{"row":80,"column":73},"action":"remove","lines":["m"]},{"start":{"row":80,"column":71},"end":{"row":80,"column":72},"action":"remove","lines":["e"]}],[{"start":{"row":80,"column":71},"end":{"row":80,"column":72},"action":"insert","lines":["c"],"id":87},{"start":{"row":80,"column":72},"end":{"row":80,"column":73},"action":"insert","lines":["o"]},{"start":{"row":80,"column":73},"end":{"row":80,"column":74},"action":"insert","lines":["n"]},{"start":{"row":80,"column":74},"end":{"row":80,"column":75},"action":"insert","lines":["t"]},{"start":{"row":80,"column":75},"end":{"row":80,"column":76},"action":"insert","lines":["e"]},{"start":{"row":80,"column":76},"end":{"row":80,"column":77},"action":"insert","lines":["n"]},{"start":{"row":80,"column":77},"end":{"row":80,"column":78},"action":"insert","lines":["t"]}],[{"start":{"row":80,"column":87},"end":{"row":80,"column":88},"action":"remove","lines":["d"],"id":88},{"start":{"row":80,"column":86},"end":{"row":80,"column":87},"action":"remove","lines":["r"]},{"start":{"row":80,"column":85},"end":{"row":80,"column":86},"action":"remove","lines":["o"]},{"start":{"row":80,"column":84},"end":{"row":80,"column":85},"action":"remove","lines":["w"]},{"start":{"row":80,"column":83},"end":{"row":80,"column":84},"action":"remove","lines":["s"]},{"start":{"row":80,"column":82},"end":{"row":80,"column":83},"action":"remove","lines":["s"]},{"start":{"row":80,"column":81},"end":{"row":80,"column":82},"action":"remove","lines":["a"]},{"start":{"row":80,"column":80},"end":{"row":80,"column":81},"action":"remove","lines":["p"]}],[{"start":{"row":80,"column":80},"end":{"row":80,"column":81},"action":"insert","lines":["i"],"id":89},{"start":{"row":80,"column":81},"end":{"row":80,"column":82},"action":"insert","lines":["m"]},{"start":{"row":80,"column":82},"end":{"row":80,"column":83},"action":"insert","lines":["a"]},{"start":{"row":80,"column":83},"end":{"row":80,"column":84},"action":"insert","lines":["g"]},{"start":{"row":80,"column":84},"end":{"row":80,"column":85},"action":"insert","lines":["e"]}],[{"start":{"row":80,"column":99},"end":{"row":80,"column":100},"action":"remove","lines":["e"],"id":90},{"start":{"row":80,"column":98},"end":{"row":80,"column":99},"action":"remove","lines":["m"]},{"start":{"row":80,"column":97},"end":{"row":80,"column":98},"action":"remove","lines":["a"]},{"start":{"row":80,"column":96},"end":{"row":80,"column":97},"action":"remove","lines":["n"]}],[{"start":{"row":80,"column":96},"end":{"row":80,"column":97},"action":"insert","lines":["t"],"id":91},{"start":{"row":80,"column":97},"end":{"row":80,"column":98},"action":"insert","lines":["i"]},{"start":{"row":80,"column":98},"end":{"row":80,"column":99},"action":"insert","lines":["t"]},{"start":{"row":80,"column":99},"end":{"row":80,"column":100},"action":"insert","lines":["l"]},{"start":{"row":80,"column":100},"end":{"row":80,"column":101},"action":"insert","lines":["e"]}],[{"start":{"row":80,"column":108},"end":{"row":80,"column":109},"action":"remove","lines":["l"],"id":92},{"start":{"row":80,"column":107},"end":{"row":80,"column":108},"action":"remove","lines":["i"]},{"start":{"row":80,"column":106},"end":{"row":80,"column":107},"action":"remove","lines":["a"]},{"start":{"row":80,"column":105},"end":{"row":80,"column":106},"action":"remove","lines":["m"]},{"start":{"row":80,"column":104},"end":{"row":80,"column":105},"action":"remove","lines":["e"]}],[{"start":{"row":80,"column":104},"end":{"row":80,"column":105},"action":"insert","lines":["c"],"id":93},{"start":{"row":80,"column":105},"end":{"row":80,"column":106},"action":"insert","lines":["o"]},{"start":{"row":80,"column":106},"end":{"row":80,"column":107},"action":"insert","lines":["n"]},{"start":{"row":80,"column":107},"end":{"row":80,"column":108},"action":"insert","lines":["t"]},{"start":{"row":80,"column":108},"end":{"row":80,"column":109},"action":"insert","lines":["e"]},{"start":{"row":80,"column":109},"end":{"row":80,"column":110},"action":"insert","lines":["n"]},{"start":{"row":80,"column":110},"end":{"row":80,"column":111},"action":"insert","lines":["t"]}],[{"start":{"row":80,"column":121},"end":{"row":80,"column":122},"action":"remove","lines":["d"],"id":94},{"start":{"row":80,"column":120},"end":{"row":80,"column":121},"action":"remove","lines":["r"]},{"start":{"row":80,"column":119},"end":{"row":80,"column":120},"action":"remove","lines":["o"]},{"start":{"row":80,"column":118},"end":{"row":80,"column":119},"action":"remove","lines":["w"]},{"start":{"row":80,"column":117},"end":{"row":80,"column":118},"action":"remove","lines":["s"]},{"start":{"row":80,"column":116},"end":{"row":80,"column":117},"action":"remove","lines":["s"]},{"start":{"row":80,"column":115},"end":{"row":80,"column":116},"action":"remove","lines":["a"]},{"start":{"row":80,"column":114},"end":{"row":80,"column":115},"action":"remove","lines":["p"]}],[{"start":{"row":80,"column":114},"end":{"row":80,"column":115},"action":"insert","lines":["i"],"id":95},{"start":{"row":80,"column":115},"end":{"row":80,"column":116},"action":"insert","lines":["m"]},{"start":{"row":80,"column":116},"end":{"row":80,"column":117},"action":"insert","lines":["a"]},{"start":{"row":80,"column":117},"end":{"row":80,"column":118},"action":"insert","lines":["g"]},{"start":{"row":80,"column":118},"end":{"row":80,"column":119},"action":"insert","lines":["e"]}],[{"start":{"row":82,"column":42},"end":{"row":82,"column":43},"action":"remove","lines":["e"],"id":96},{"start":{"row":82,"column":41},"end":{"row":82,"column":42},"action":"remove","lines":["m"]},{"start":{"row":82,"column":40},"end":{"row":82,"column":41},"action":"remove","lines":["a"]},{"start":{"row":82,"column":39},"end":{"row":82,"column":40},"action":"remove","lines":["n"]}],[{"start":{"row":82,"column":39},"end":{"row":82,"column":40},"action":"insert","lines":["t"],"id":97},{"start":{"row":82,"column":40},"end":{"row":82,"column":41},"action":"insert","lines":["i"]},{"start":{"row":82,"column":41},"end":{"row":82,"column":42},"action":"insert","lines":["t"]},{"start":{"row":82,"column":42},"end":{"row":82,"column":43},"action":"insert","lines":["l"]},{"start":{"row":82,"column":43},"end":{"row":82,"column":44},"action":"insert","lines":["l"]},{"start":{"row":82,"column":44},"end":{"row":82,"column":45},"action":"insert","lines":["e"]}],[{"start":{"row":82,"column":58},"end":{"row":82,"column":59},"action":"remove","lines":["e"],"id":98},{"start":{"row":82,"column":57},"end":{"row":82,"column":58},"action":"remove","lines":["m"]},{"start":{"row":82,"column":56},"end":{"row":82,"column":57},"action":"remove","lines":["a"]},{"start":{"row":82,"column":55},"end":{"row":82,"column":56},"action":"remove","lines":["n"]}],[{"start":{"row":82,"column":55},"end":{"row":82,"column":56},"action":"insert","lines":["t"],"id":99},{"start":{"row":82,"column":56},"end":{"row":82,"column":57},"action":"insert","lines":["i"]},{"start":{"row":82,"column":57},"end":{"row":82,"column":58},"action":"insert","lines":["t"]},{"start":{"row":82,"column":58},"end":{"row":82,"column":59},"action":"insert","lines":["l"]},{"start":{"row":82,"column":59},"end":{"row":82,"column":60},"action":"insert","lines":["e"]}],[{"start":{"row":83,"column":43},"end":{"row":83,"column":44},"action":"remove","lines":["l"],"id":100},{"start":{"row":83,"column":42},"end":{"row":83,"column":43},"action":"remove","lines":["i"]},{"start":{"row":83,"column":41},"end":{"row":83,"column":42},"action":"remove","lines":["a"]},{"start":{"row":83,"column":40},"end":{"row":83,"column":41},"action":"remove","lines":["m"]},{"start":{"row":83,"column":39},"end":{"row":83,"column":40},"action":"remove","lines":["e"]}],[{"start":{"row":83,"column":39},"end":{"row":83,"column":40},"action":"insert","lines":["c"],"id":101},{"start":{"row":83,"column":40},"end":{"row":83,"column":41},"action":"insert","lines":["o"]},{"start":{"row":83,"column":41},"end":{"row":83,"column":42},"action":"insert","lines":["n"]},{"start":{"row":83,"column":42},"end":{"row":83,"column":43},"action":"insert","lines":["t"]},{"start":{"row":83,"column":43},"end":{"row":83,"column":44},"action":"insert","lines":["e"]},{"start":{"row":83,"column":44},"end":{"row":83,"column":45},"action":"insert","lines":["n"]}],[{"start":{"row":83,"column":39},"end":{"row":83,"column":45},"action":"remove","lines":["conten"],"id":102},{"start":{"row":83,"column":39},"end":{"row":83,"column":46},"action":"insert","lines":["content"]}],[{"start":{"row":83,"column":60},"end":{"row":83,"column":61},"action":"remove","lines":["l"],"id":103},{"start":{"row":83,"column":59},"end":{"row":83,"column":60},"action":"remove","lines":["i"]},{"start":{"row":83,"column":58},"end":{"row":83,"column":59},"action":"remove","lines":["a"]},{"start":{"row":83,"column":57},"end":{"row":83,"column":58},"action":"remove","lines":["m"]},{"start":{"row":83,"column":56},"end":{"row":83,"column":57},"action":"remove","lines":["e"]}],[{"start":{"row":83,"column":56},"end":{"row":83,"column":57},"action":"insert","lines":["c"],"id":104}],[{"start":{"row":83,"column":56},"end":{"row":83,"column":57},"action":"remove","lines":["c"],"id":105},{"start":{"row":83,"column":56},"end":{"row":83,"column":63},"action":"insert","lines":["content"]}],[{"start":{"row":84,"column":46},"end":{"row":84,"column":47},"action":"remove","lines":["d"],"id":106},{"start":{"row":84,"column":45},"end":{"row":84,"column":46},"action":"remove","lines":["r"]},{"start":{"row":84,"column":44},"end":{"row":84,"column":45},"action":"remove","lines":["o"]},{"start":{"row":84,"column":43},"end":{"row":84,"column":44},"action":"remove","lines":["w"]},{"start":{"row":84,"column":42},"end":{"row":84,"column":43},"action":"remove","lines":["s"]},{"start":{"row":84,"column":41},"end":{"row":84,"column":42},"action":"remove","lines":["s"]},{"start":{"row":84,"column":40},"end":{"row":84,"column":41},"action":"remove","lines":["a"]},{"start":{"row":84,"column":39},"end":{"row":84,"column":40},"action":"remove","lines":["p"]}],[{"start":{"row":84,"column":39},"end":{"row":84,"column":40},"action":"insert","lines":["i"],"id":107},{"start":{"row":84,"column":40},"end":{"row":84,"column":41},"action":"insert","lines":["m"]},{"start":{"row":84,"column":41},"end":{"row":84,"column":42},"action":"insert","lines":["a"]},{"start":{"row":84,"column":42},"end":{"row":84,"column":43},"action":"insert","lines":["g"]},{"start":{"row":84,"column":43},"end":{"row":84,"column":44},"action":"insert","lines":["e"]}],[{"start":{"row":84,"column":61},"end":{"row":84,"column":62},"action":"remove","lines":["d"],"id":108},{"start":{"row":84,"column":60},"end":{"row":84,"column":61},"action":"remove","lines":["r"]},{"start":{"row":84,"column":59},"end":{"row":84,"column":60},"action":"remove","lines":["o"]},{"start":{"row":84,"column":58},"end":{"row":84,"column":59},"action":"remove","lines":["w"]},{"start":{"row":84,"column":57},"end":{"row":84,"column":58},"action":"remove","lines":["s"]},{"start":{"row":84,"column":56},"end":{"row":84,"column":57},"action":"remove","lines":["s"]},{"start":{"row":84,"column":55},"end":{"row":84,"column":56},"action":"remove","lines":["a"]},{"start":{"row":84,"column":54},"end":{"row":84,"column":55},"action":"remove","lines":["p"]}],[{"start":{"row":84,"column":54},"end":{"row":84,"column":55},"action":"insert","lines":["i"],"id":109},{"start":{"row":84,"column":55},"end":{"row":84,"column":56},"action":"insert","lines":["m"]},{"start":{"row":84,"column":56},"end":{"row":84,"column":57},"action":"insert","lines":["a"]},{"start":{"row":84,"column":57},"end":{"row":84,"column":58},"action":"insert","lines":["g"]},{"start":{"row":84,"column":58},"end":{"row":84,"column":59},"action":"insert","lines":["e"]}],[{"start":{"row":101,"column":31},"end":{"row":101,"column":32},"action":"remove","lines":["録"],"id":110},{"start":{"row":101,"column":30},"end":{"row":101,"column":31},"action":"remove","lines":["登"]},{"start":{"row":101,"column":29},"end":{"row":101,"column":30},"action":"remove","lines":["ー"]},{"start":{"row":101,"column":28},"end":{"row":101,"column":29},"action":"remove","lines":["ザ"]},{"start":{"row":101,"column":27},"end":{"row":101,"column":28},"action":"remove","lines":["ー"]},{"start":{"row":101,"column":26},"end":{"row":101,"column":27},"action":"remove","lines":["ユ"]}],[{"start":{"row":101,"column":26},"end":{"row":101,"column":30},"action":"insert","lines":["写真投稿"],"id":111}],[{"start":{"row":80,"column":64},"end":{"row":80,"column":65},"action":"insert","lines":["u"],"id":112},{"start":{"row":80,"column":65},"end":{"row":80,"column":66},"action":"insert","lines":["s"]},{"start":{"row":80,"column":66},"end":{"row":80,"column":67},"action":"insert","lines":["e"]},{"start":{"row":80,"column":67},"end":{"row":80,"column":68},"action":"insert","lines":["r"]},{"start":{"row":80,"column":68},"end":{"row":80,"column":69},"action":"insert","lines":["_"]}],[{"start":{"row":80,"column":69},"end":{"row":80,"column":70},"action":"insert","lines":["i"],"id":113},{"start":{"row":80,"column":70},"end":{"row":80,"column":71},"action":"insert","lines":["d"]},{"start":{"row":80,"column":71},"end":{"row":80,"column":72},"action":"insert","lines":[","]}],[{"start":{"row":80,"column":72},"end":{"row":80,"column":73},"action":"insert","lines":[" "],"id":114}],[{"start":{"row":80,"column":104},"end":{"row":80,"column":105},"action":"insert","lines":[":"],"id":115},{"start":{"row":80,"column":105},"end":{"row":80,"column":106},"action":"insert","lines":["u"]},{"start":{"row":80,"column":106},"end":{"row":80,"column":107},"action":"insert","lines":["s"]},{"start":{"row":80,"column":107},"end":{"row":80,"column":108},"action":"insert","lines":["e"]}],[{"start":{"row":80,"column":105},"end":{"row":80,"column":108},"action":"remove","lines":["use"],"id":116},{"start":{"row":80,"column":105},"end":{"row":80,"column":112},"action":"insert","lines":["user_id"]}],[{"start":{"row":80,"column":112},"end":{"row":80,"column":113},"action":"insert","lines":[","],"id":117}],[{"start":{"row":80,"column":113},"end":{"row":80,"column":114},"action":"insert","lines":[" "],"id":118}],[{"start":{"row":81,"column":29},"end":{"row":82,"column":0},"action":"insert","lines":["",""],"id":119},{"start":{"row":82,"column":0},"end":{"row":82,"column":20},"action":"insert","lines":["                    "]}],[{"start":{"row":82,"column":20},"end":{"row":82,"column":78},"action":"insert","lines":["$stmt->bindParam(':titlle', $this->title, PDO::PARAM_STR);"],"id":120}],[{"start":{"row":82,"column":44},"end":{"row":82,"column":45},"action":"remove","lines":["e"],"id":121},{"start":{"row":82,"column":43},"end":{"row":82,"column":44},"action":"remove","lines":["l"]},{"start":{"row":82,"column":42},"end":{"row":82,"column":43},"action":"remove","lines":["l"]},{"start":{"row":82,"column":41},"end":{"row":82,"column":42},"action":"remove","lines":["t"]},{"start":{"row":82,"column":40},"end":{"row":82,"column":41},"action":"remove","lines":["i"]},{"start":{"row":82,"column":39},"end":{"row":82,"column":40},"action":"remove","lines":["t"]}],[{"start":{"row":82,"column":39},"end":{"row":82,"column":40},"action":"insert","lines":["u"],"id":122},{"start":{"row":82,"column":40},"end":{"row":82,"column":41},"action":"insert","lines":["s"]}],[{"start":{"row":82,"column":39},"end":{"row":82,"column":41},"action":"remove","lines":["us"],"id":123},{"start":{"row":82,"column":39},"end":{"row":82,"column":46},"action":"insert","lines":["user_id"]}],[{"start":{"row":82,"column":60},"end":{"row":82,"column":61},"action":"remove","lines":["e"],"id":124},{"start":{"row":82,"column":59},"end":{"row":82,"column":60},"action":"remove","lines":["l"]},{"start":{"row":82,"column":58},"end":{"row":82,"column":59},"action":"remove","lines":["t"]},{"start":{"row":82,"column":57},"end":{"row":82,"column":58},"action":"remove","lines":["i"]},{"start":{"row":82,"column":56},"end":{"row":82,"column":57},"action":"remove","lines":["t"]}],[{"start":{"row":82,"column":56},"end":{"row":82,"column":57},"action":"insert","lines":["u"],"id":125},{"start":{"row":82,"column":57},"end":{"row":82,"column":58},"action":"insert","lines":["s"]},{"start":{"row":82,"column":58},"end":{"row":82,"column":59},"action":"insert","lines":["e"]}],[{"start":{"row":82,"column":56},"end":{"row":82,"column":59},"action":"remove","lines":["use"],"id":126},{"start":{"row":82,"column":56},"end":{"row":82,"column":63},"action":"insert","lines":["user_id"]}],[{"start":{"row":82,"column":78},"end":{"row":82,"column":79},"action":"remove","lines":["R"],"id":127},{"start":{"row":82,"column":77},"end":{"row":82,"column":78},"action":"remove","lines":["T"]},{"start":{"row":82,"column":76},"end":{"row":82,"column":77},"action":"remove","lines":["S"]}],[{"start":{"row":82,"column":76},"end":{"row":82,"column":77},"action":"insert","lines":["I"],"id":128},{"start":{"row":82,"column":77},"end":{"row":82,"column":78},"action":"insert","lines":["N"]},{"start":{"row":82,"column":78},"end":{"row":82,"column":79},"action":"insert","lines":["T"]}],[{"start":{"row":0,"column":0},"end":{"row":164,"column":5},"action":"remove","lines":["<?php","    // print(\"こんにちは\\n\");","    // print('こんにちは' . PHP_EOL);","    // print'こんにちは' . PHP_EOL;","    class Post{","        public $id;","        public $user_id;","        public $title;","        public $content;","        public $image;","        public $created_at;","        public function __construct($user_id=\"\", $title=\"\", $content=\"\",$image=\"\"){","            $this->user_id = $user_id;","            $this->title = $title;","            $this->content =$content;","            $this->image = $image;","            // print $this->name . 'さんが生まれた' . PHP_EOL;","        }","          // 入力チェックをするメソッド","        public function validate(){","            // 空のエラー配列作成","            $errors = array();","            // 名前が入力されていなければ","            if($this->title === ''){","                $errors[] = 'タイトルが入力されていません';","            }","            // 年齢が入力されていなければ","            if($this->content === ''){","                $errors[] = '本文を入力してください';","            if($this->image === ''){","                $errors[] = '画像を選択してください';","            }","            // 完成したエラー配列はいあげる","            return $errors;","        }}","        private static function get_connection(){","            try {","                // オプション設定","                $options = array(","                    PDO::ATTR_ERRMODE => PDO::ERRMODE_EXCEPTION,        // 失敗したら例外を投げる","                    PDO::ATTR_DEFAULT_FETCH_MODE => PDO::FETCH_CLASS,   //デフォルトのフェッチモードはクラス","                    PDO::MYSQL_ATTR_INIT_COMMAND => 'SET NAMES utf8',   //MySQL サーバーへの接続時に実行するコマンド","                  );","                $pdo = new PDO('mysql:host=localhost;dbname=bbs_app', 'root', '', $options);","                return $pdo;","                ","            } catch (PDOException $e) {","                return 'PDO exception: ' . $e->getMessage();","        }","    }","","// データベースとの切断を行うメソッド","        private static function close_connection($pdo, $stmp){","            try {","                $pdo = null;","                $stmp = null;","            } catch (PDOException $e) {","                return 'PDO exception: ' . $e->getMessage();","            }","        }","        ","// 全テーブル情報を取得するメソッド","        public static function all(){","            try {","                $pdo = self::get_connection();","                $stmt = $pdo->query('SELECT * FROM users ORDER BY id DESC');","                // フェッチの結果を、Userクラスのインスタンスにマッピングする","                $stmt->setFetchMode(PDO::FETCH_CLASS|PDO::FETCH_PROPS_LATE, 'User');","                $users = $stmt->fetchAll();","                self::close_connection($pdo, $stmp);","                // Userクラスのインスタンスの配列を返す","                return $users;","            } catch (PDOException $e) {","                return 'PDO exception: ' . $e->getMessage();","            }","        }public function save(){","            try {","                $pdo = self::get_connection();","                ","                if($this->id === null){","                    $stmt = $pdo -> prepare(\"INSERT INTO posts (user_id, title, content, image) VALUES (:user_id, :title, :content, :image)\");","                    // バインド処理","                    $stmt->bindParam(':user_id', $this->user_id, PDO::PARAM_INT);","                    $stmt->bindParam(':titlle', $this->title, PDO::PARAM_STR);","                    $stmt->bindParam(':content', $this->content, PDO::PARAM_STR);","                    $stmt->bindParam(':image', $this->image, PDO::PARAM_STR);","","                    // 実行","                    $stmt->execute();","                    ","                }else{","                    $stmt = $pdo -> prepare(\"UPDATE users SET name=:name, age=:age WHERE id=:id\");","                    // バインド処理","                    $stmt->bindParam(':name', $this->name, PDO::PARAM_STR);","                    $stmt->bindParam(':age', $this->age, PDO::PARAM_INT);","                    $stmt->bindParam(':id', $this->id, PDO::PARAM_INT);","","                    // 実行","                    $stmt->execute();","                }","                self::close_connection($pdo, $stmp);","                if($this->id === null){","                return \"新規写真投稿が成功しました。\";","                    ","                }else{","                    return $this->name . 'さんの情報を更新しました';","                }","                ","            } catch (PDOException $e) {","                return 'PDO exception: ' . $e->getMessage();","            }","        }","        public static function find($id){","            try {","                $pdo = self::get_connection();","                $stmt = $pdo -> prepare(\"SELECT * FROM users WHERE id=:id\");","                // バインド処理","                $stmt->bindParam(':id', $id, PDO::PARAM_INT);                // 実行","                $stmt->execute();","                 // フェッチの結果を、Userクラスのインスタンスにマッピングする","                $stmt->setFetchMode(PDO::FETCH_CLASS|PDO::FETCH_PROPS_LATE, 'User');","                $user = $stmt->fetch();","                self::close_connection($pdo, $stmp);","                return $user;","                ","            } catch (PDOException $e) {","                return 'PDO exception: ' . $e->getMessage();","            }","        }","        public function destroy(){","             try {","                $pdo = self::get_connection();","                $stmt = $pdo -> prepare(\"DELETE FROM users WHERE id=:id\");","                // バインド処理","                $stmt->bindParam(':id', $this->id, PDO::PARAM_INT);                // 実行","                $stmt->execute();","             ","                ","            } catch (PDOException $e) {","                return 'PDO exception: ' . $e->getMessage();","            }","        }","        public static function login($email, $password){","            try {","                $pdo = self::get_connection();","                $stmt = $pdo -> prepare(\"SELECT * FROM users WHERE email=:email AND password=:password\");","                // バインド処理","                $stmt->bindParam(':email', $email, PDO::PARAM_STR);","                $stmt->bindParam(':password', $password, PDO::PARAM_STR);","","                // 実行","                $stmt->execute();","                 // フェッチの結果を、Userクラスのインスタンスにマッピングする","                $stmt->setFetchMode(PDO::FETCH_CLASS|PDO::FETCH_PROPS_LATE, 'User');","                $user = $stmt->fetch();","                self::close_connection($pdo, $stmp);","                return $user;","                ","            } catch (PDOException $e) {","                return 'PDO exception: ' . $e->getMessage();","            }","        }","    ","        ","    }"],"id":129},{"start":{"row":0,"column":0},"end":{"row":173,"column":0},"action":"insert","lines":["<?php","    // モデル(M)","   ","    // 投稿の設計図を作成","    class Post{","        // プロパティ","        public $id; // 投稿番号","        public $user_id; //投稿者のユーザー番号","        public $title; // タイトル","        public $content; // 本文","        public $image; // 画像ファイル名","        public $create_at; // 投稿日時","        // コンストラクタ","        public function __construct($user_id=\"\", $title=\"\", $content=\"\", $image=\"\"){","            $this->user_id = $user_id;","            $this->title = $title;","            $this->content = $content;","            $this->image = $image;","        }","        ","        // 入力チェックをするメソッド","        public function validate(){","            // 空のエラー配列作成","            $errors = array();","            // タイトルが入力されていなければ","            if($this->title === ''){","                $errors[] = 'タイトルが入力されていません';","            }","            // 本文が入力されていなければ","            if($this->content === ''){","                $errors[] = '本文を入力してください';","            }","            ","            // 画像が選択されていなければ","            if($this->image === ''){","                $errors[] = '画像を選択してください';","            }","            ","            // 完成したエラー配列はいあげる","            return $errors;","        }","                // データベースと接続を行うメソッド","        private static function get_connection(){","            try {","                // オプション設定","                $options = array(","                    PDO::ATTR_ERRMODE => PDO::ERRMODE_EXCEPTION,        // 失敗したら例外を投げる","                    PDO::ATTR_DEFAULT_FETCH_MODE => PDO::FETCH_CLASS,   //デフォルトのフェッチモードはクラス","                    PDO::MYSQL_ATTR_INIT_COMMAND => 'SET NAMES utf8',   //MySQL サーバーへの接続時に実行するコマンド","                  );","                $pdo = new PDO('mysql:host=localhost;dbname=bbs_app', 'root', '', $options);","                return $pdo;","                ","            } catch (PDOException $e) {","                return 'PDO exception: ' . $e->getMessage();","            }","        }","","// データベースとの切断を行うメソッド","        private static function close_connection($pdo, $stmp){","            try {","                $pdo = null;","                $stmp = null;","            } catch (PDOException $e) {","                return 'PDO exception: ' . $e->getMessage();","            }","        }","        // 全テーブル情報を取得するメソッド","        public static function all(){","            try {","                $pdo = self::get_connection();","                $stmt = $pdo->query('SELECT posts.id, users.name, posts.title, posts.content, posts.image, posts.created_at FROM posts JOIN users ON posts.user_id = users.id ORDER BY posts.id desc');","                // フェッチの結果を、Postクラスのインスタンスにマッピングする","                $stmt->setFetchMode(PDO::FETCH_CLASS|PDO::FETCH_PROPS_LATE, 'Post');","                $posts = $stmt->fetchAll();","                self::close_connection($pdo, $stmp);","                // Postクラスのインスタンスの配列を返す","                return $posts;","            } catch (PDOException $e) {","                return 'PDO exception: ' . $e->getMessage();","            }","        }","        // データを1件登録するメソッド","        public function save(){","            try {","                $pdo = self::get_connection();","                ","                if($this->id === null){","                $stmt = $pdo -> prepare(\"INSERT INTO posts (user_id, title, content, image) VALUES (:user_id, :title, :content, :image)\");","                // バインド処理","                $stmt->bindParam(':user_id', $this->user_id, PDO::PARAM_INT);","                $stmt->bindParam(':title', $this->title, PDO::PARAM_STR);","                $stmt->bindParam(':content', $this->content, PDO::PARAM_STR);","                $stmt->bindParam(':image', $this->image, PDO::PARAM_STR);","","                // 実行","                $stmt->execute();","                    ","                }else{","                     $stmt = $pdo -> prepare(\"UPDATE posts SET title=:title, content=:content, image=:image WHERE id=:id\");","                     // バインド処理","                     $stmt->bindParam(':title', $this->title, PDO::PARAM_STR);","                     $stmt->bindParam(':content', $this->content, PDO::PARAM_STR);","                     $stmt->bindParam(':image', $this->image, PDO::PARAM_STR);","                     $stmt->bindParam(':id', $this->id, PDO::PARAM_INT);","                     // 実行","                     $stmt->execute();","                }","                ","                self::close_connection($pdo, $stmp);","                if($this->id === null){","                    return \"新規写真投稿が成功しました。\";","                }else{","                    return $this->id. 'の投稿情報を更新しました';","                }","                ","            } catch (PDOException $e) {","                return 'PDO exception: ' . $e->getMessage();","            }","        }","        public static function find($id){","                try {","                $pdo = self::get_connection();","                $stmt = $pdo -> prepare(\"SELECT posts.user_id, posts.id, posts.title, posts.content, posts.image, posts.created_at, users.name FROM posts JOIN users ON posts.user_id = users.id WHERE posts.id=:id\");","                // バインド処理","                $stmt->bindParam(':id', $id, PDO::PARAM_INT);                // 実行","                $stmt->execute();","                // フェッチの結果を、Postクラスのインスタンスにマッピングする","                $stmt->setFetchMode(PDO::FETCH_CLASS|PDO::FETCH_PROPS_LATE, 'Post');","                $post = $stmt->fetch();","                self::close_connection($pdo, $stmp);","                return $post;","                ","            } catch (PDOException $e) {","                return 'PDO exception: ' . $e->getMessage();","            }","        }","        ","        public function destroy(){","            try {","                $pdo = self::get_connection();","                $stmt = $pdo -> prepare(\"DELETE FROM users WHRER id=:id\");","                // バインド処理","                $stmt->bindParam(':id', $this->id, PDO::PARAM_INT);                // 実行","                $stmt->execute();","               ","                } catch (PDOException $e) {","                    return 'PDO exception: ' . $e->getMessage();","            }","        }","        ","        // メールアドレスとパスワードを与えられてユーザーを取得","        public static function login($email, $password){","             try {","                $pdo = self::get_connection();","                $stmt = $pdo -> prepare(\"SELECT * FROM users WHERE email=:email AND password=:password\");","                // バインド処理","                $stmt->bindParam(':email', $email, PDO::PARAM_STR);","                 $stmt->bindParam(':password', $password, PDO::PARAM_STR);                // 実行","","                // 実行","                $stmt->execute();","                // フェッチの結果を、Userクラスのインスタンスにマッピングする","                $stmt->setFetchMode(PDO::FETCH_CLASS|PDO::FETCH_PROPS_LATE, 'User');","                $user = $stmt->fetch();","                self::close_connection($pdo, $stmp);","                return $user;","                ","                } catch (PDOException $e) {","                    return 'PDO exception: ' . $e->getMessage();","                }","        }","    }",""]}],[{"start":{"row":0,"column":0},"end":{"row":173,"column":0},"action":"remove","lines":["<?php","    // モデル(M)","   ","    // 投稿の設計図を作成","    class Post{","        // プロパティ","        public $id; // 投稿番号","        public $user_id; //投稿者のユーザー番号","        public $title; // タイトル","        public $content; // 本文","        public $image; // 画像ファイル名","        public $create_at; // 投稿日時","        // コンストラクタ","        public function __construct($user_id=\"\", $title=\"\", $content=\"\", $image=\"\"){","            $this->user_id = $user_id;","            $this->title = $title;","            $this->content = $content;","            $this->image = $image;","        }","        ","        // 入力チェックをするメソッド","        public function validate(){","            // 空のエラー配列作成","            $errors = array();","            // タイトルが入力されていなければ","            if($this->title === ''){","                $errors[] = 'タイトルが入力されていません';","            }","            // 本文が入力されていなければ","            if($this->content === ''){","                $errors[] = '本文を入力してください';","            }","            ","            // 画像が選択されていなければ","            if($this->image === ''){","                $errors[] = '画像を選択してください';","            }","            ","            // 完成したエラー配列はいあげる","            return $errors;","        }","                // データベースと接続を行うメソッド","        private static function get_connection(){","            try {","                // オプション設定","                $options = array(","                    PDO::ATTR_ERRMODE => PDO::ERRMODE_EXCEPTION,        // 失敗したら例外を投げる","                    PDO::ATTR_DEFAULT_FETCH_MODE => PDO::FETCH_CLASS,   //デフォルトのフェッチモードはクラス","                    PDO::MYSQL_ATTR_INIT_COMMAND => 'SET NAMES utf8',   //MySQL サーバーへの接続時に実行するコマンド","                  );","                $pdo = new PDO('mysql:host=localhost;dbname=bbs_app', 'root', '', $options);","                return $pdo;","                ","            } catch (PDOException $e) {","                return 'PDO exception: ' . $e->getMessage();","            }","        }","","// データベースとの切断を行うメソッド","        private static function close_connection($pdo, $stmp){","            try {","                $pdo = null;","                $stmp = null;","            } catch (PDOException $e) {","                return 'PDO exception: ' . $e->getMessage();","            }","        }","        // 全テーブル情報を取得するメソッド","        public static function all(){","            try {","                $pdo = self::get_connection();","                $stmt = $pdo->query('SELECT posts.id, users.name, posts.title, posts.content, posts.image, posts.created_at FROM posts JOIN users ON posts.user_id = users.id ORDER BY posts.id desc');","                // フェッチの結果を、Postクラスのインスタンスにマッピングする","                $stmt->setFetchMode(PDO::FETCH_CLASS|PDO::FETCH_PROPS_LATE, 'Post');","                $posts = $stmt->fetchAll();","                self::close_connection($pdo, $stmp);","                // Postクラスのインスタンスの配列を返す","                return $posts;","            } catch (PDOException $e) {","                return 'PDO exception: ' . $e->getMessage();","            }","        }","        // データを1件登録するメソッド","        public function save(){","            try {","                $pdo = self::get_connection();","                ","                if($this->id === null){","                $stmt = $pdo -> prepare(\"INSERT INTO posts (user_id, title, content, image) VALUES (:user_id, :title, :content, :image)\");","                // バインド処理","                $stmt->bindParam(':user_id', $this->user_id, PDO::PARAM_INT);","                $stmt->bindParam(':title', $this->title, PDO::PARAM_STR);","                $stmt->bindParam(':content', $this->content, PDO::PARAM_STR);","                $stmt->bindParam(':image', $this->image, PDO::PARAM_STR);","","                // 実行","                $stmt->execute();","                    ","                }else{","                     $stmt = $pdo -> prepare(\"UPDATE posts SET title=:title, content=:content, image=:image WHERE id=:id\");","                     // バインド処理","                     $stmt->bindParam(':title', $this->title, PDO::PARAM_STR);","                     $stmt->bindParam(':content', $this->content, PDO::PARAM_STR);","                     $stmt->bindParam(':image', $this->image, PDO::PARAM_STR);","                     $stmt->bindParam(':id', $this->id, PDO::PARAM_INT);","                     // 実行","                     $stmt->execute();","                }","                ","                self::close_connection($pdo, $stmp);","                if($this->id === null){","                    return \"新規写真投稿が成功しました。\";","                }else{","                    return $this->id. 'の投稿情報を更新しました';","                }","                ","            } catch (PDOException $e) {","                return 'PDO exception: ' . $e->getMessage();","            }","        }","        public static function find($id){","                try {","                $pdo = self::get_connection();","                $stmt = $pdo -> prepare(\"SELECT posts.user_id, posts.id, posts.title, posts.content, posts.image, posts.created_at, users.name FROM posts JOIN users ON posts.user_id = users.id WHERE posts.id=:id\");","                // バインド処理","                $stmt->bindParam(':id', $id, PDO::PARAM_INT);                // 実行","                $stmt->execute();","                // フェッチの結果を、Postクラスのインスタンスにマッピングする","                $stmt->setFetchMode(PDO::FETCH_CLASS|PDO::FETCH_PROPS_LATE, 'Post');","                $post = $stmt->fetch();","                self::close_connection($pdo, $stmp);","                return $post;","                ","            } catch (PDOException $e) {","                return 'PDO exception: ' . $e->getMessage();","            }","        }","        ","        public function destroy(){","            try {","                $pdo = self::get_connection();","                $stmt = $pdo -> prepare(\"DELETE FROM users WHRER id=:id\");","                // バインド処理","                $stmt->bindParam(':id', $this->id, PDO::PARAM_INT);                // 実行","                $stmt->execute();","               ","                } catch (PDOException $e) {","                    return 'PDO exception: ' . $e->getMessage();","            }","        }","        ","        // メールアドレスとパスワードを与えられてユーザーを取得","        public static function login($email, $password){","             try {","                $pdo = self::get_connection();","                $stmt = $pdo -> prepare(\"SELECT * FROM users WHERE email=:email AND password=:password\");","                // バインド処理","                $stmt->bindParam(':email', $email, PDO::PARAM_STR);","                 $stmt->bindParam(':password', $password, PDO::PARAM_STR);                // 実行","","                // 実行","                $stmt->execute();","                // フェッチの結果を、Userクラスのインスタンスにマッピングする","                $stmt->setFetchMode(PDO::FETCH_CLASS|PDO::FETCH_PROPS_LATE, 'User');","                $user = $stmt->fetch();","                self::close_connection($pdo, $stmp);","                return $user;","                ","                } catch (PDOException $e) {","                    return 'PDO exception: ' . $e->getMessage();","                }","        }","    }",""],"id":130},{"start":{"row":0,"column":0},"end":{"row":173,"column":0},"action":"insert","lines":["<?php","    // モデル(M)","   ","    // 投稿の設計図を作成","    class Post{","        // プロパティ","        public $id; // 投稿番号","        public $user_id; //投稿者のユーザー番号","        public $title; // タイトル","        public $content; // 本文","        public $image; // 画像ファイル名","        public $create_at; // 投稿日時","        // コンストラクタ","        public function __construct($user_id=\"\", $title=\"\", $content=\"\", $image=\"\"){","            $this->user_id = $user_id;","            $this->title = $title;","            $this->content = $content;","            $this->image = $image;","        }","        ","        // 入力チェックをするメソッド","        public function validate(){","            // 空のエラー配列作成","            $errors = array();","            // タイトルが入力されていなければ","            if($this->title === ''){","                $errors[] = 'タイトルが入力されていません';","            }","            // 本文が入力されていなければ","            if($this->content === ''){","                $errors[] = '本文を入力してください';","            }","            ","            // 画像が選択されていなければ","            if($this->image === ''){","                $errors[] = '画像を選択してください';","            }","            ","            // 完成したエラー配列はいあげる","            return $errors;","        }","                // データベースと接続を行うメソッド","        private static function get_connection(){","            try {","                // オプション設定","                $options = array(","                    PDO::ATTR_ERRMODE => PDO::ERRMODE_EXCEPTION,        // 失敗したら例外を投げる","                    PDO::ATTR_DEFAULT_FETCH_MODE => PDO::FETCH_CLASS,   //デフォルトのフェッチモードはクラス","                    PDO::MYSQL_ATTR_INIT_COMMAND => 'SET NAMES utf8',   //MySQL サーバーへの接続時に実行するコマンド","                  );","                $pdo = new PDO('mysql:host=localhost;dbname=bbs_app', 'root', '', $options);","                return $pdo;","                ","            } catch (PDOException $e) {","                return 'PDO exception: ' . $e->getMessage();","            }","        }","","// データベースとの切断を行うメソッド","        private static function close_connection($pdo, $stmp){","            try {","                $pdo = null;","                $stmp = null;","            } catch (PDOException $e) {","                return 'PDO exception: ' . $e->getMessage();","            }","        }","        // 全テーブル情報を取得するメソッド","        public static function all(){","            try {","                $pdo = self::get_connection();","                $stmt = $pdo->query('SELECT posts.id, users.name, posts.title, posts.content, posts.image, posts.created_at FROM posts JOIN users ON posts.user_id = users.id ORDER BY posts.id desc');","                // フェッチの結果を、Postクラスのインスタンスにマッピングする","                $stmt->setFetchMode(PDO::FETCH_CLASS|PDO::FETCH_PROPS_LATE, 'Post');","                $posts = $stmt->fetchAll();","                self::close_connection($pdo, $stmp);","                // Postクラスのインスタンスの配列を返す","                return $posts;","            } catch (PDOException $e) {","                return 'PDO exception: ' . $e->getMessage();","            }","        }","        // データを1件登録するメソッド","        public function save(){","            try {","                $pdo = self::get_connection();","                ","                if($this->id === null){","                $stmt = $pdo -> prepare(\"INSERT INTO posts (user_id, title, content, image) VALUES (:user_id, :title, :content, :image)\");","                // バインド処理","                $stmt->bindParam(':user_id', $this->user_id, PDO::PARAM_INT);","                $stmt->bindParam(':title', $this->title, PDO::PARAM_STR);","                $stmt->bindParam(':content', $this->content, PDO::PARAM_STR);","                $stmt->bindParam(':image', $this->image, PDO::PARAM_STR);","","                // 実行","                $stmt->execute();","                    ","                }else{","                     $stmt = $pdo -> prepare(\"UPDATE posts SET title=:title, content=:content, image=:image WHERE id=:id\");","                     // バインド処理","                     $stmt->bindParam(':title', $this->title, PDO::PARAM_STR);","                     $stmt->bindParam(':content', $this->content, PDO::PARAM_STR);","                     $stmt->bindParam(':image', $this->image, PDO::PARAM_STR);","                     $stmt->bindParam(':id', $this->id, PDO::PARAM_INT);","                     // 実行","                     $stmt->execute();","                }","                ","                self::close_connection($pdo, $stmp);","                if($this->id === null){","                    return \"新規写真投稿が成功しました。\";","                }else{","                    return $this->id. 'の投稿情報を更新しました';","                }","                ","            } catch (PDOException $e) {","                return 'PDO exception: ' . $e->getMessage();","            }","        }","        public static function find($id){","                try {","                $pdo = self::get_connection();","                $stmt = $pdo -> prepare(\"SELECT posts.user_id, posts.id, posts.title, posts.content, posts.image, posts.created_at, users.name FROM posts JOIN users ON posts.user_id = users.id WHERE posts.id=:id\");","                // バインド処理","                $stmt->bindParam(':id', $id, PDO::PARAM_INT);                // 実行","                $stmt->execute();","                // フェッチの結果を、Postクラスのインスタンスにマッピングする","                $stmt->setFetchMode(PDO::FETCH_CLASS|PDO::FETCH_PROPS_LATE, 'Post');","                $post = $stmt->fetch();","                self::close_connection($pdo, $stmp);","                return $post;","                ","            } catch (PDOException $e) {","                return 'PDO exception: ' . $e->getMessage();","            }","        }","        ","        public function destroy(){","            try {","                $pdo = self::get_connection();","                $stmt = $pdo -> prepare(\"DELETE FROM users WHRER id=:id\");","                // バインド処理","                $stmt->bindParam(':id', $this->id, PDO::PARAM_INT);                // 実行","                $stmt->execute();","               ","                } catch (PDOException $e) {","                    return 'PDO exception: ' . $e->getMessage();","            }","        }","        ","        // メールアドレスとパスワードを与えられてユーザーを取得","        public static function login($email, $password){","             try {","                $pdo = self::get_connection();","                $stmt = $pdo -> prepare(\"SELECT * FROM users WHERE email=:email AND password=:password\");","                // バインド処理","                $stmt->bindParam(':email', $email, PDO::PARAM_STR);","                 $stmt->bindParam(':password', $password, PDO::PARAM_STR);                // 実行","","                // 実行","                $stmt->execute();","                // フェッチの結果を、Userクラスのインスタンスにマッピングする","                $stmt->setFetchMode(PDO::FETCH_CLASS|PDO::FETCH_PROPS_LATE, 'User');","                $user = $stmt->fetch();","                self::close_connection($pdo, $stmp);","                return $user;","                ","                } catch (PDOException $e) {","                    return 'PDO exception: ' . $e->getMessage();","                }","        }","    }",""]}]]},"ace":{"folds":[],"scrolltop":1175,"scrollleft":0,"selection":{"start":{"row":173,"column":0},"end":{"row":173,"column":0},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":82,"state":"php-start","mode":"ace/mode/php"}},"timestamp":1626766265023,"hash":"2714f22c07b7d77c9a31119fa125a7735864fb0a"}